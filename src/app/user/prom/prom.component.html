
<div class="mx-auto"  [ngClass]="(step!='1')?'small-width':'max-width'">

				<div *ngIf="step=='0'" @fadeSlideInOut>
					<div class="card card-block">
						<div class="card-body">
							<div class="row ">
								<div class="col-md-12">
									<button *ngIf="events.length>0" class="ml-1 float-right btn btn-primary" (click)="openStats()">
										{{'generics.Back' | translate}}
									</button>
									<div class="row">
										<h2 class="content-header mt-0 mb-2">Nuevo evento</h2>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<form action="#" class="form form-horizontal" [formGroup]="seizuresForm">
										<div class="form-body">
											<div class="">
												<div class="">
													<div class="form-group">
														<label>Tipo</label>													
														{{type}}
														<select name="event-estructure-type" class="form-control"
															formControlName="type"
															[ngClass]="{ 'is-invalid': submitted && f.type.errors }"
															(keyup)="refresh.next()">
															<option [ngValue]="null" disabled selected>--Select one--</option>
															<option value="allergy">Allergy</option>
															<option value="disease">Disease</option>
															<option value="drug">Drug</option>
															<option value="symptom">Symptom</option>
															<option value="treatment">Treatment</option>
															<option value="other">Other</option>
														</select>
														<small class="form-text text-muted danger"
															*ngIf="submitted && f.type.errors">{{'generics.required' |
															translate }}</small>
													</div>
												</div>
												<div class="">
													<div class="form-group">
														<label>Nombre</label>
														<input type="text" class="col-5 form-control" id="numericos2"
															formControlName="name"
															[ngClass]="{ 'is-invalid': submitted && f.name.errors }"
															name="numericos2">
														<small class="form-text text-muted danger"
														*ngIf="submitted && f.name.errors">{{'generics.required' |
														translate }}</small>
													</div>
												</div>
												<div class="">
													<div class="form-group">
														<label class="mb-0">Date</label>
														<div class="">
															<mat-form-field class="mr-sm-24" fxFlex  >
																<input matInput class="grey" readonly [matDatepicker]="picker"
																				autocomplete="off"
																				name="date" formControlName="date">
																<mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
																<mat-datepicker  [startAt]="date" #picker></mat-datepicker>
															</mat-form-field>
														</div>
													</div>
												</div>
												<div class="">
													<div class="form-group">
														<label>{{'generics.notes' | translate }}</label>
														<textarea maxlength="150" name="notes" formControlName="notes"
															placeholder="{{'seizures.Write down any details' | translate }}"
															class="autoajustable form-control"></textarea>
													</div>
												</div>
											</div>
		
										</div>
									</form>
								</div>
								<div class="col-md-12 center-elements">
									<button type="button" class="btn btn-dark" (click)="saveData();">{{'generics.SaveAndClose' |
										translate }}</button>
								</div>
							</div>
						</div>
					</div>
					
				</div>
				<div *ngIf="step=='1'" @fadeSlideInOut>
					<div class="card card-block">
						<div class="card-body">

					<h2 class="d-inline content-header mt-0 mb-2">{{'menu.Events' | translate }}</h2>
					<p class="float-right"> <button class="btn btn-primary" (click)="goto('0');">New</button></p>
					<div class="table-responsive"> <!--*ngIf="loadedEvents && events.length>0"-->
						<!--<table class="table mb-0 table-wrapper-scroll-y my-custom-scrollbar bg-white"
							aria-labelledby="HPO">
							<thead>
								<tr>
									<th>Tipo</th>
									<th>Nombre</th>
									<th>{{'generics.Date' | translate }}</th>
									<th>Notas</th>
									<th>{{'generics.Options' | translate }}</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let event of events ; let i = index" [ngClass]="{'allergy': event.type === 'allergy', 'disease': event.type === 'disease', 'drug': event.type === 'drug', 'symptom': event.type === 'symptom', 'treatment': event.type === 'treatment'}">
									<td>
										<select [(ngModel)]="event.type" disabled>
											<option value="allergy">Allergy</option>
											<option value="disease">Disease</option>
											<option value="drug">Drug</option>
											<option value="symptom">Symptom</option>
											<option value="treatment">Treatment</option>
											<option value="other">other</option>
										</select>
									</td>
									<td>
										{{event.name}}
									</td>
									<td *ngIf="event.date!=null">
										{{event.date |date}}
										
									</td>
									<td *ngIf="event.date==null">
										-
									</td>
									<td>
										<span>{{event.notes}}</span>
									</td>
									<td>
										<a class="danger" (click)="deleteSeizure(event);"
											href="javascript:void(0)"><i class="ft-trash"></i></a>
									</td>
								</tr>
							</tbody>
						</table>-->
						<mat-form-field>
							<mat-label>Filter</mat-label>
							<input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
							</mat-form-field>
							
							<div class="mat-elevation-z8">
							<table mat-table [dataSource]="dataSource" matSort>
							
								<!-- type Column -->
								<ng-container matColumnDef="type">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Tipo </th>
								<td mat-cell *matCellDef="let row"> {{row.type}} </td>
								</ng-container>
							
								<!-- name Column -->
								<ng-container matColumnDef="name">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre </th>
								<td mat-cell *matCellDef="let row"> {{row.name}} </td>
								</ng-container>
							
								<!-- date Column -->
								<ng-container matColumnDef="date">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha </th>
								<td mat-cell *matCellDef="let row">
									<span *ngIf="row.date!=null">{{row.date |date}}</span>
									<span *ngIf="row.date==null">--/--/--</span>
								</td>
								</ng-container>

								<!-- notes Column -->
								<ng-container matColumnDef="notes">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Notas </th>
								<td mat-cell *matCellDef="let row"> {{row.notes}} </td>
								</ng-container>
							
								<!-- actions Column -->
								<ng-container matColumnDef="actions">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Actions </th>
								<td mat-cell *matCellDef="let row"> <a class="danger" (click)="deleteSeizure(row);"
									href="javascript:void(0)"><i class="ft-trash"></i></a> </td>
								</ng-container>
							
								<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
								<tr mat-row *matRowDef="let row; columns: displayedColumns;" [ngClass]="{'allergy': row.type === 'allergy', 'disease': row.type === 'disease', 'drug': row.type === 'drug', 'symptom': row.type === 'symptom', 'treatment': row.type === 'treatment'}"></tr>
							
								<!-- Row shown when there is no matching data. -->
								<tr class="mat-row" *matNoDataRow>
								<td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
								</tr>
							</table>
							
							<mat-paginator [pageSizeOptions]="[10, 25, 100]" aria-label="Select page of events"></mat-paginator>
							</div>
					</div>
					<div *ngIf="loadedEvents && events.length==0">
						<p>{{'generics.NoData' | translate }}</p>
					</div>
					<div class="" *ngIf="!loadedEvents">
						<div class="center-elements">
							<div><p class="centerSpinner"><i class="fa fa-spinner fa-spin fa-3x fa-fw pink"></i></p></div>
						</div>
					</div>
				</div>
			</div>
	</div>
</div>